<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Taşınmaz Güncelle</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
  <div *ngIf="uyariMesaji" class="toast-notification shadow" role="alert" aria-live="assertive" aria-atomic="true">
    {{ uyariMesaji }}
  </div>
  <div *ngIf="gosterOnayKutusu" class="onay-kutusu shadow rounded p-4 bg-white text-center">
    <p class="fw-bold mb-3">Taşınmaz güncellemek istediğinize emin misiniz?</p>
    <button class="btn btn-danger me-2" (click)="Onayla()">Evet</button>
    <button class="btn btn-secondary" (click)="Vazgec()">Hayır</button>
  </div>
  <div *ngIf="gosterCikisOnayKutusu" class="onay-kutusu shadow rounded p-4 bg-white text-center">
    <p class="fw-bold mb-3">Çıkış yapmak istediğinize emin misiniz?</p>
    <button class="btn btn-danger me-2" (click)="OnaylaCikis()">Evet</button>
    <button class="btn btn-secondary" (click)="VazgecCikis()">Hayır</button>
  </div>
  <form [formGroup]="form" (ngSubmit)="TasinmazGuncelle()">
    <nav class="navbar navbar-expand-lg" style="background-color: rgb(187, 181, 181);">
      <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="#">Taşınmaz Güncelle</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item px-2" *ngIf="isAdmin">
              <a class="nav-link" (click)="LogIslemleri($event)">Log İşlemleri</a>
            </li>
            <li class="nav-item px-2" *ngIf="isAdmin">
              <a class="nav-link" (click)="KullaniciIslemleri($event)">Kullanıcı İşlemleri</a>
            </li>
            <li class="nav-item px-2">
              <a class="nav-link" (click)="MevcutTasinmazlar($event)">Mevcut Taşınmazlar Listesi</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="d-flex justify-content-end mt-3 me-3">
      <button type="button" class="btn btn-danger btn-sm" (click)="Cikis($event)">
        <i class="fa fa-sign-out-alt me-1"></i> Çıkış
      </button>
    </div>
    <div class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-city form-icon me-2"></i>
            <select class="form-control" formControlName="seciliIlId" (change)="onIlDegisti()">
              <option [ngValue]="null" disabled>İl seçiniz</option>
              <option *ngFor="let il of iller" [ngValue]="il.ilId">{{ il.ilAd }}</option>
            </select>
          </div>
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-building form-icon me-2"></i>
            <select class="form-control" formControlName="seciliIlceId" (change)="onIlceDegisti()">
              <option [ngValue]="null" disabled>İlçe seçiniz</option>
              <option *ngFor="let ilce of filtrelenmisIlceler" [ngValue]="ilce.ilceId">{{ ilce.ilceAd }}</option>
            </select>
          </div>
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-location-dot form-icon me-2"></i>
            <select class="form-control" formControlName="seciliMahalleId">
              <option [ngValue]="null" disabled>Mahalle seçiniz</option>
              <option *ngFor="let mahalle of filtrelenmisMahalleler" [ngValue]="mahalle.mahalleId">
                {{ mahalle.mahalleAd }}
              </option>
            </select>
          </div>
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-th form-icon me-2"></i>
            <input type="text" class="form-control" formControlName="adaa" placeholder="Ada" />
          </div>
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-th-large form-icon me-2"></i>
            <input type="text" class="form-control" formControlName="parsel" placeholder="Parsel" />
          </div>
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-tag form-icon me-2"></i>
            <input type="text" class="form-control" formControlName="nitelik" placeholder="Nitelik" />
          </div>
          <div class="form-group mb-4 d-flex align-items-center">
            <i class="fa fa-map-marker-alt form-icon me-2"></i>
            <input type="text" class="form-control" formControlName="koordinat" placeholder="Koordinat" readonly />
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group mb-4 d-flex align-items-start">
            <i class="fa fa-map form-icon mt-2 me-2"></i>
            <textarea class="form-control" rows="5" formControlName="adres" placeholder="Adres giriniz"></textarea>
          </div>
          <div class="text-end mt-3">
            <button type="button" class="btn btn-success" (click)="GuncellemeIstegiGeldi()">
              <i class="fa fa-pen-to-square"></i> Güncelle
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="harita-wrapper">
      <div id="harita"></div>
      <div id="harita-controls">
        <div id="layer-buttons">
          <button type="button" (click)="toggleLayer('osm')"
            [class.active]="osmLayer.getVisible()">OpenStreetMap</button>
          <button type="button" (click)="toggleLayer('google')" [class.active]="googleLayer.getVisible()">Google
            Maps</button>
        </div>
        <div id="opacity-control">
          <label for="opacityRange">Opaklık: {{ opacityValue }}</label>
          <input id="opacityRange" type="range" min="0.1" max="1" step="0.1" [value]="opacityValue"
            (input)="setOpacity($event)" />
        </div>
      </div>
    </div>
  </form>
</body>

</html>